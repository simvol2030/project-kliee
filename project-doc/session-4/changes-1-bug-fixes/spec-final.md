# Spec-final: Changes-1 ‚Äî Bug Fixes (Session-4)

**–î–∞—Ç–∞:** 2026-02-21
**Score —Å—É–º–º–∞—Ä–Ω—ã–π:** ~25 (—Ç—Ä–∏ –±–∞–≥–∞)
**–ö—Ç–æ –¥–µ–ª–∞–µ—Ç:** Developer (Claude Code Web)
**–í–µ—Ç–∫–∞:** `claude/session-4-bug-fixes`

---

## Bug 1: Blog Posts –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

### –°–∏–º–ø—Ç–æ–º—ã
- `/en/blog` ‚Äî –ø—É—Å—Ç–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–Ω–µ—Ç –ø–æ—Å—Ç–æ–≤, —Ö–æ—Ç—è –≤ –ë–î –æ–Ω–∏ –µ—Å—Ç—å)
- `/blog` (admin) ‚Äî —Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç–æ–π –∏–ª–∏ –æ—à–∏–±–∫–∞ 500
- QA –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–ª –≤–æ –≤—Ä–µ–º—è Session-3: tech-report —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—à–∏–±–∫–∏ –Ω–∞ /en/blog

### –í–µ—Ä–æ—è—Ç–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞
–¢–∞–±–ª–∏—Ü–∞ `blog_posts` —Å–æ–∑–¥–∞–Ω–∞ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ `sqlite3`, –∞ –Ω–µ —á–µ—Ä–µ–∑ `drizzle-kit push`. –í–æ–∑–º–æ–∂–Ω–æ:
1. –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–æ–≤ –∫–æ–ª–æ–Ω–æ–∫ (Drizzle –æ–∂–∏–¥–∞–µ—Ç INTEGER, —Å–æ–∑–¥–∞–Ω–æ TEXT, –∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç)
2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∫–æ–ª–æ–Ω–æ–∫
3. –ü—Ä–æ–±–ª–µ–º–∞ —Å `.where(eq(blogPosts.is_published, 1))` ‚Äî –µ—Å–ª–∏ `is_published` —Ö—Ä–∞–Ω–∏—Ç—Å—è –∏–Ω–∞—á–µ

### Score
`(3√ó3) + (1√ó2) + (2√ó2) + (2√ó1) = 9+2+4+2 = 17` ‚Üí Developer

### –§–∞–π–ª—ã –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
```
frontend-sveltekit/src/lib/server/db/schema.ts        ‚Äî –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ blogPosts —Ç–∞–±–ª–∏—Ü—ã
frontend-sveltekit/src/routes/(admin)/blog/+page.server.ts
frontend-sveltekit/src/routes/[lang=locale]/blog/+page.server.ts
frontend-sveltekit/src/routes/api/blog/+server.ts
```

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–≤—ã–º –¥–µ–ª–æ–º)

1. –ó–∞–ø—Ä–æ—Å–∏—Ç—å —Ä–µ–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã —á–µ—Ä–µ–∑ SSH:
   ```bash
   sqlite3 /opt/websites/k-liee.com/data/db/sqlite/app.db ".schema blog_posts"
   sqlite3 /opt/websites/k-liee.com/data/db/sqlite/app.db "SELECT * FROM blog_posts LIMIT 3;"
   ```
2. –°—Ä–∞–≤–Ω–∏—Ç—å —Å `schema.ts` ‚Äî –Ω–∞–π—Ç–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ PM2: `pm2 logs k-liee-frontend --lines 50`

### –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å

- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å schema.ts —Å —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –ë–î (–∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç)
- –ï—Å–ª–∏ –Ω—É–∂–µ–Ω `ALTER TABLE` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫ ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ `db:push` –∏–ª–∏ SQL
- –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è: `/en/blog` –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—ã

---

## Bug 2: –ü—É–±–ª–∏—á–Ω—ã–π Layout –≤ –ê–¥–º–∏–Ω–∫–µ (homepage + blog)

### –°–∏–º–ø—Ç–æ–º—ã
–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö `/homepage` –∏ `/blog` –≤ —Ä–µ–∂–∏–º–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—É–±–ª–∏—á–Ω—ã–π layout —Å–∞–π—Ç–∞ (–Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–π —Ö–µ–¥–µ—Ä —Å –º–µ–Ω—é –Ω–∞ —Ä—É—Å—Å–∫–æ–º/–∞–Ω–≥–ª–∏–π—Å–∫–æ–º –∏/–∏–ª–∏ –ø—É–±–ª–∏—á–Ω—ã–π —Ñ—É—Ç–µ—Ä), –≤–º–µ—Å—Ç–æ –∏–ª–∏ –ø–æ–≤–µ—Ä—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—Å–∫–æ–≥–æ layout.

### –í–µ—Ä–æ—è—Ç–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞
–û–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:
1. **–ò–º–ø–æ—Ä—Ç –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞** ‚Äî `(admin)/homepage/+page.svelte` –∏–ª–∏ `(admin)/blog/+page.svelte` –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π Header/Footer –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
2. **–î–∞–Ω–Ω—ã–µ layout** ‚Äî `+layout.server.ts` –∏–ª–∏ `+page.server.ts` —ç—Ç–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –≤—ã–∑—ã–≤–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π `load()` –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ layout, –∏ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è
3. **CSS –∫–æ–Ω—Ñ–ª–∏–∫—Ç** ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –ø—É–±–ª–∏—á–Ω–æ–≥–æ layout –ø—Ä–æ—Å–∞—á–∏–≤–∞—é—Ç—Å—è (–º–µ–Ω–µ–µ –≤–µ—Ä–æ—è—Ç–Ω–æ)

### Score
`(2√ó3) + (1√ó2) + (1√ó2) + (1√ó1) = 6+2+2+1 = 11` ‚Üí Developer

### –§–∞–π–ª—ã –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
```
frontend-sveltekit/src/routes/(admin)/homepage/+page.svelte    ‚Äî –Ω–∞–π—Ç–∏ –ø—É–±–ª–∏—á–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã
frontend-sveltekit/src/routes/(admin)/homepage/+page.server.ts ‚Äî –Ω–∞–π—Ç–∏ –≤—ã–∑–æ–≤—ã –ø—É–±–ª–∏—á–Ω—ã—Ö load
frontend-sveltekit/src/routes/(admin)/blog/+page.svelte
frontend-sveltekit/src/routes/(admin)/blog/+page.server.ts
frontend-sveltekit/src/routes/(admin)/+layout@.svelte          ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ @ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
```

### –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å
- –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã –ø—É–±–ª–∏—á–Ω—ã—Ö Layout-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (Header, Footer, MobileMenu) –∏–∑ admin-—Å—Ç—Ä–∞–Ω–∏—Ü
- –ï—Å–ª–∏ `+page.server.ts` –≤—ã–∑—ã–≤–∞–µ—Ç `parent()` –∫–æ—Ç–æ—Ä—ã–π —Ç—è–Ω–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚Äî —É–±—Ä–∞—Ç—å –∏–ª–∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ `+layout@.svelte` —Å —Å–∏–º–≤–æ–ª–æ–º `@` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π layout

### –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
–ü–æ—Å–ª–µ —Ñ–∏–∫—Å–∞: `/homepage` –∏ `/blog` –≤ –∞–¥–º–∏–∫–µ –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ admin layout (—Å–∞–π–¥–±–∞—Ä + main content), –±–µ–∑ –ø—É–±–ª–∏—á–Ω–æ–≥–æ header/footer

---

## Bug 3: –§–ª–∞–≥–∏ —è–∑—ã–∫–æ–≤ ‚Äî –ø—É—Å—Ç—ã–µ –∫–≤–∞–¥—Ä–∞—Ç—ã

### –°–∏–º–ø—Ç–æ–º—ã
–ò–∫–æ–Ω–∫–∏ —Ñ–ª–∞–≥–æ–≤ –¥–ª—è –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞ (EN üá¨üáß, RU üá∑üá∫, ES üá™üá∏, ZH üá®üá≥) –≤ —Ö–µ–¥–µ—Ä–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ —Å–∞–π—Ç–∞ –∏ –º–æ–±–∏–ª—å–Ω–æ–º –º–µ–Ω—é –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ –ø—É—Å—Ç—ã–µ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∏ / –∫–≤–∞–¥—Ä–∞—Ç—ã –≤–º–µ—Å—Ç–æ —Ñ–ª–∞–≥–æ–≤.

### –í–µ—Ä–æ—è—Ç–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞
1. **Emoji —Ñ–ª–∞–≥–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è** –Ω–∞ Linux-—Å–µ—Ä–≤–µ—Ä–∞—Ö –±–µ–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —à—Ä–∏—Ñ—Ç–æ–≤ (Noto Color Emoji –∏ —Ç.–ø.)
2. –¢–µ–∫—É—â–∏–π –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Unicode emoji —Ñ–ª–∞–≥–∏ –Ω–∞–ø—Ä—è–º—É—é

### Score
`(1√ó3) + (1√ó2) + (1√ó2) + (1√ó1) = 3+2+2+1 = 8` ‚Üí Developer

### –§–∞–π–ª—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å —Ñ–ª–∞–≥–∞–º–∏
```bash
# –ù–∞–π—Ç–∏ —Ñ–∞–π–ª—ã —Å emoji —Ñ–ª–∞–≥–∞–º–∏ –∏–ª–∏ lang-switcher
grep -r "üá¨üáß\|üá∑üá∫\|üá™üá∏\|üá®üá≥\|flag\|lang-switcher" frontend-sveltekit/src --include="*.svelte" -l
```

–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ:
```
frontend-sveltekit/src/lib/components/Header.svelte
frontend-sveltekit/src/lib/components/MobileMenu.svelte
```

### –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å

**–í–∞—Ä–∏–∞–Ω—Ç A (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è): –ó–∞–º–µ–Ω–∏—Ç—å emoji –Ω–∞ SVG-—Ñ–ª–∞–≥–∏ –∏–ª–∏ –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä—ã**

–í–º–µ—Å—Ç–æ `üá¨üáß English` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- –¢–µ–∫—Å—Ç–æ–≤—É—é –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä—É —Å –∏–∫–æ–Ω–∫–æ–π: `EN`, `RU`, `ES`, `ZH` ‚Äî –ø—Ä–æ—Å—Ç–æ–π, –Ω–∞–¥—ë–∂–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
- –ò–ª–∏ SVG-—Ñ–ª–∞–≥–∏ —á–µ—Ä–µ–∑ inline SVG –∏–ª–∏ CSS background-image

**–í–∞—Ä–∏–∞–Ω—Ç B: PNG —Ñ–ª–∞–≥–∏**
- –î–æ–±–∞–≤–∏—Ç—å 4 PNG-—Ñ–∞–π–ª–∞ —Ñ–ª–∞–≥–æ–≤ –≤ `static/images/flags/`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `<img src="/images/flags/en.png">` –≤–º–µ—Å—Ç–æ emoji

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–ª—è Developer:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç A ‚Äî —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä—ã —Å CSS-—Å—Ç–∏–ª–µ–º, –∏–º–∏—Ç–∏—Ä—É—é—â–∏–º —Ñ–ª–∞–≥ (—Ü–≤–µ—Ç–Ω–æ–π –±—ç–π–¥–∂). –≠—Ç–æ –Ω–∞–¥—ë–∂–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö.

### –ü—Ä–∏–º–µ—Ä –∑–∞–º–µ–Ω—ã
```svelte
<!-- –ë—ã–ª–æ: -->
üá¨üáß English

<!-- –°—Ç–∞–ª–æ (–≤–∞—Ä–∏–∞–Ω—Ç A - badge): -->
<span class="lang-badge lang-en">EN</span> English

<!-- CSS: -->
.lang-en { background: #012169; color: white; }  /* UK blue */
.lang-ru { background: #CC0000; color: white; }  /* Russia red */
.lang-es { background: #AA151B; color: white; }  /* Spain red */
.lang-zh { background: #DE2910; color: white; }  /* China red */
```

---

## –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

1. **Bug 1 (Blog posts)** ‚Äî —Å–∞–º—ã–π –∫—Ä–∏—Ç–∏—á–Ω—ã–π, –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤–µ—Å—å –±–ª–æ–≥
2. **Bug 2 (Layout –≤ –∞–¥–º–∏–Ω–∫–µ)** ‚Äî UX-–∫—Ä–∏—Ç–∏—á–Ω—ã–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞–¥–º–∏–Ω–∫–æ–π
3. **Bug 3 (–§–ª–∞–≥–∏)** ‚Äî –≤–∏–∑—É–∞–ª—å–Ω—ã–π, –Ω–æ –∑–∞–º–µ—Ç–Ω—ã–π –Ω–∞ –ø—É–±–ª–∏—á–Ω–æ–º —Å–∞–π—Ç–µ

---

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

- [ ] `/en/blog` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤
- [ ] `/blog` (admin) –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å–µ –ø–æ—Å—Ç—ã –≤ DataTable
- [ ] `/homepage` –∏ `/blog` –≤ –∞–¥–º–∏–∫–µ: —Ç–æ–ª—å–∫–æ admin layout, –Ω–∏–∫–∞–∫–æ–≥–æ public header/footer
- [ ] –Ø–∑—ã–∫–æ–≤–æ–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å: —á–∏—Ç–∞–µ–º—ã–µ —Ñ–ª–∞–≥–∏/–∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä—ã –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- [ ] `npm run check` ‚Äî 0 –æ—à–∏–±–æ–∫ TypeScript
- [ ] `npm run build` ‚Äî —É—Å–ø–µ—à–Ω–æ
