# Спецификация: Раздел Works — полноценное управление коллекциями и работами

**Версия:** v2 (структурированный)
**Дата:** 2026-01-08
**Автор:** Moderator → CLI

---

## Сопоставление: Есть сейчас vs Должно быть

| Аспект | Есть сейчас | Должно быть |
|--------|-------------|-------------|
| **Данные** | Захардкожены в коде | Хранятся в БД, загружаются динамически |
[Ну, здесь смотри, я не уверен, что данные хранятся в базе данных, данные, по-моему, хранятся вообще в JSON файле. Нужно посмотреть, проверить и убедиться, чтобы это не водило в заблуждение. ]
| **Админка Works** | Нет или ограничена | Полное управление коллекциями и работами |
[Этого раздела нет вообще в админке, нужно его сделать заново. ]
| **Коллекции** | Статичные категории | Создание/редактирование коллекций через админку |
| **Фото коллекции** | ? | Фото, название, описание для каждой коллекции |
[Чтобы ты сам в браузере открыл этот раздел, посмотрел, как он устроен, работает, а потом уже формировал итоговый файл. А так получается, что ты от себя делаешь в итоге много ошибок. ]
| **Счётчик работ** | Нет | Автоматический подсчёт работ в коллекции |
[Есть подсчёт, но он ведёт через захардкоженные данные, нужно сохранить, чтобы в новой логике он тоже работал. ]
| **Фото работы** | Только 1 фото | Несколько фото к каждой работе |
[Да, вот смотри, по поводу фото, да, сейчас только по одной работе идётся, поэтому нужно убрать это ограничение. ]
| **Данные работы** | Ограничено | Название + описание + мульти-фото |
| **Просмотр работы** | Увеличение одного фото | Галерея с названием и описанием |
| **Связь с магазином** | Частично реализовано | Работающая связь работы → товар |
| **Мультиязычность** | ? | 4 языка (EN/RU/ES/ZH) для коллекций и работ |
[И светлая, тёмная тема сейчас всё равно работает есть. Но это идёт через hot core in and done, что просто реализация - мы эту функцию не утратили. Нужно на это обратить внимание, что всё сохранилось. Поэтому давай сделаем так: ты откроешь браузер, ты посмотри, как это сейчас устроено, работает. А так получается, ты больше на догадках строишь, все твои точнения, и в итоге всё очень не конкретно и размыто. И будет полезным, если ты откроешь сам, всё посмотришь. У тебя есть доступ браузера, давай сделай это. ]

**URL:** https://k-liee.com/ru/works

---

## Что на выходе

1. **Админка для Works** — полное управление разделом
2. **Коллекции работ** — создание, редактирование, удаление с фото/названием/описанием
3. **Работы в коллекции** — мульти-фото, название, описание на 4 языках
4. **Счётчик** — автоматическое отображение количества работ в коллекции
5. **Галерея просмотра** — при клике на работу открывается с названием, описанием и всеми фото
6. **Связь с магазином** — возможность привязать работу к товару
7. **Миграция данных** — существующий контент перенесён в БД без потерь
8. **Темы и языки** — работает в светлой/тёмной теме на всех 4 языках

---

## Что нужно сделать

1. **Миграция существующих данных**
   - Проанализировать где сейчас хранятся данные (хардкод)
   - Создать/обновить схему БД для коллекций и работ
   - Перенести существующий контент в БД

2. **Админка — Коллекции**
   - CRUD для коллекций (создать, читать, обновить, удалить)
   - Поля: фото, название (4 языка), описание (4 языка)
   - Отображение счётчика работ в коллекции

3. **Админка — Работы**
   - CRUD для работ внутри коллекции
   - Мульти-загрузка фотографий
   - Поля: название (4 языка), описание (4 языка)
   - Сортировка работ и фотографий

4. **Связь с магазином**
   - Проанализировать существующую реализацию
   - Доработать связь работа → товар
   - UI для привязки в админке

5. **Фронтенд — список коллекций**
   - Динамическая загрузка из БД
   - Отображение фото, названия, счётчика работ
   - Светлая/тёмная тема

6. **Фронтенд — работы в коллекции**
   - Плиточный интерфейс (как сейчас)
   - Динамическая загрузка из БД

7. **Фронтенд — просмотр работы**
   - Модалка/лайтбокс при клике
   - Галерея фотографий с перелистыванием
   - Отображение названия и описания
   - Кнопка "Купить" если связано с магазином

[Ну и смотри, на выходе должно получиться главное: чтобы была возможность, чтобы, во-первых, все работало корректно на сайте, чтобы данные не потеряли, чтобы заново их не забивать. Это очень важно обратить на это внимание. Если, соответственно, мы потом будем делать миграцию, чтобы данные можно было легко перенести в новую структуру, уже в базу данных. Второй момент — чтобы все изображения были правильной пути указаны, чтобы все корректно работало, и чтобы была возможность через админку управлять этим разделом, как добавлять новые, так и редактировать существующие. ]
---

## Факторы реализации

- **Не потерять данные** — сначала миграция, потом переключение на БД
- **Существующая связь с магазином** — проанализировать что уже есть, не изобретать заново
- **Мультиязычность** — 4 языка (EN/RU/ES/ZH) для всех текстовых полей
- **Темы** — светлая/тёмная, как сейчас на сайте
- **Drizzle ORM + SQLite** — текущий стек
- **Производительность** — оптимизация изображений

---

## Критерии успеха

- [ ] Существующий контент перенесён в БД без потерь
- [ ] Админка: можно создать новую коллекцию с фото и описанием
- [ ] Админка: можно добавить работу с несколькими фото
- [ ] Админка: работает мультиязычный ввод (4 языка)
- [ ] Фронтенд: коллекции загружаются из БД
- [ ] Фронтенд: отображается счётчик работ в коллекции
- [ ] Фронтенд: при клике на работу — галерея с названием и описанием
- [ ] Фронтенд: переключение языков работает
- [ ] Фронтенд: светлая/тёмная тема работает
- [ ] Связь с магазином: можно привязать работу к товару

---

## Чек-лист для проверки в браузере

**Админка:**
- [ ] Создать новую коллекцию (фото + название RU/EN + описание)
- [ ] Добавить 3 работы в коллекцию
- [ ] К одной работе добавить 5 фотографий
- [ ] Заполнить название и описание на всех 4 языках
- [ ] Привязать работу к товару из магазина
- [ ] Сохранить и проверить что данные не потерялись

**Фронтенд (https://k-liee.com/ru/works):**
- [ ] Коллекции отображаются с фото и счётчиком
- [ ] Зайти в коллекцию — работы в плиточном виде
- [ ] Кликнуть на работу — открывается галерея
- [ ] Перелистать фотографии в галерее
- [ ] Видно название и описание работы
- [ ] Переключить язык (RU → EN) — тексты меняются
- [ ] Переключить тему (светлая ↔ тёмная) — всё корректно
- [ ] Если работа связана с магазином — есть кнопка "Купить"

---

*v2 — структурированный CLI, передаётся Moderator для комментариев*

[Ты сам откроешь в браузере, все посмотришь, ты посмотришь, что лучше сформулировать. Давай проверь и тогда сформулируй, я потом посмотрю и дальше добьемся нашего workflow. ]