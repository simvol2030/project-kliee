# Feedback v2 - Shop UI/UX & Menu Integration Issues

**Date:** 2025-12-22
**Environment:** Production https://k-liee.com
**Tested by:** Claude Code CLI (Integrator)
**Branch to sync from:** `dev`

---

## IMPORTANT: Before Starting

```bash
# Sync with the latest dev branch before starting work
git fetch origin
git checkout -b claude/shop-fixes-v2 origin/dev
# OR if already in a branch:
git fetch origin && git merge origin/dev
```

---

## Bug 1: Product Image 404 Error (CRITICAL)

**Score:** 11
**Priority:** CRITICAL

**Steps to reproduce:**
1. Open https://k-liee.com/en/shop
2. Click on any product (e.g., "Chebu-Rasha Throwing Up Eyes")
3. Product page opens but main image shows broken/404

**Console error:**
```
Failed to load resource: the server responded with a status of 404 ()
URL: https://k-liee.com/uploads/...
```

**Expected:** Product image displays correctly
**Actual:** Broken image placeholder with alt text only

**Screenshot:** `.playwright-mcp/product-page-dark.png`

**Files to investigate:**
- `src/routes/[lang=locale]/shop/[slug]/+page.svelte`
- `src/routes/[lang=locale]/shop/[slug]/+page.server.ts`
- Image path construction logic

**Note:** Product cards on shop listing page show images correctly. Issue is only on detail page.

---

## Bug 2: Menu Integration Incomplete (HIGH)

**Score:** 13
**Priority:** HIGH

**Problem:**
Public site reads menu from JSON, but admin manages menu in database. They're not connected!

| Component | Data Source |
|-----------|-------------|
| Admin (`/layout/menu`) | Database `menu_items` table |
| Public Header | JSON file `data/menu.json` |

**Current files:**
- `src/lib/data/menu.provider.ts` - reads from `../../../../data/menu.json`
- `src/routes/(admin)/layout/menu/+page.server.ts` - reads from `db.menuItems`

**Task:**
1. Update `menu.provider.ts` to read from database instead of JSON
2. Add "Shop" menu item via admin panel:
   - href: `/shop`
   - label_en: `Shop`
   - label_ru: `Магазин`
   - label_es: `Tienda`
   - label_zh: `商店`
   - order_index: between Contact and NFT (or at end)
3. Verify Header displays menu from DB
4. Test that admin changes reflect on public site

---

## Bug 3: Dark Theme Issues in Shop (HIGH)

**Score:** 11
**Priority:** HIGH

**Screenshot:** `.playwright-mcp/shop-dark-theme.png`

### 3.1 Filter Button Invisible
- Location: Shop page left side, "Filters" button
- Issue: Nearly invisible in dark theme (no border/contrast)

### 3.2 Sort Dropdown Not Visible
- Location: Shop page right side, "Sort by:" dropdown
- Issue: Text blends with dark background

### 3.3 Hero Section Wrong Colors
- Location: Shop page hero ("Art Shop" title area)
- Issue: Purple/blue gradient doesn't match site's dark color scheme
- Should use site's CSS variables for consistency

### 3.4 Product Cards Light Background
- Product cards have white/light backgrounds in dark mode
- Should adapt to dark theme colors

**Files to fix:**
- `src/routes/[lang=locale]/shop/+page.svelte`
- Possibly `src/app.css` or component-specific styles

**Suggested fix:**
Use CSS variables: `var(--background)`, `var(--foreground)`, `var(--card)`, etc.

---

## Bug 4: Admin Login Validation Issue (MEDIUM)

**Score:** 13
**Priority:** MEDIUM

**Problem:**
- Default credentials shown: `admin@example.com` / `admin123`
- Password validation requires 12+ characters
- `admin123` is only 8 characters - login fails!

**Steps to reproduce:**
1. Open https://k-liee.com/login
2. Enter: `admin@example.com` / `admin123`
3. Click "Sign In"
4. Error: "Password must be at least 12 characters long"

**Files to investigate:**
- `src/lib/server/validation.ts` - password validation rules
- `src/routes/login/+page.server.ts` - login action
- Database seeding - default admin password

**Suggested fix:**
Either update default admin password to 12+ chars, or adjust validation for seeded accounts.

---

## Summary

| # | Bug | Priority | Score |
|---|-----|----------|-------|
| 1 | Product Image 404 | CRITICAL | 11 |
| 2 | Menu Integration | HIGH | 13 |
| 3 | Dark Theme Issues | HIGH | 11 |
| 4 | Admin Login | MEDIUM | 13 |

---

## After Completion

1. Push changes to `claude/shop-fixes-v2` branch
2. Notify CLI that work is complete
3. CLI will:
   - Merge to `dev`
   - Test locally
   - Merge to `main`
   - Deploy to production

---

*Generated by Claude Code CLI (Integrator)*
*Workflow v4.0 | 2025-12-22*
